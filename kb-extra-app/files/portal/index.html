<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kiezbox Captive Portal</title>
</head>
<body>

<h1>Kiezbox captive portal</h1>
<p>Work in progress...</p>

<!-- Share Button -->
<button id="shareButton">Share this page</button>

<!-- Copy to Clipboard Button (shown if navigator.share is unavailable) -->
<button id="copyButton" style="display:none;">Copy URL to Clipboard</button>

<script>
  const shareButton = document.getElementById("shareButton");
  const copyButton = document.getElementById("copyButton");

  // Get the base URL (only the protocol and domain part)
  const baseUrl = window.location.origin;

  // Function to share the URL using the Web Share API
  const shareUrl = async () => {
    try {
      await navigator.share({
        title: "Kiezbox Captive Portal",  // Customize the title
        url: baseUrl                     // Share only the base URL
      });
      console.log("Data was shared successfully");
    } catch (err) {
      console.error("Share failed:", err.message);
    }
  };

  // Function to copy the URL to the clipboard
  const copyUrlToClipboard = () => {
    navigator.clipboard.writeText(baseUrl)
      .then(() => {
        console.log("URL copied to clipboard");
      })
      .catch((err) => {
        console.error("Failed to copy URL to clipboard:", err);
      });
  };

  // Check if navigator.share is available
  if (navigator.share) {
    // If supported, use the share button
    shareButton.addEventListener("click", shareUrl);
  } else {
    // If not supported, show the copy button and use it as fallback
    shareButton.style.display = "none";  // Hide the share button
    copyButton.style.display = "inline"; // Show the copy to clipboard button

    // If the copy button is clicked, copy the URL to clipboard
    copyButton.addEventListener("click", copyUrlToClipboard);
  }
</script>

</body>
</html>

